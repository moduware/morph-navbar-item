<link rel="import" href="/bower_components/morph-element/morph-element.html">
<link rel="import" href="../morph-shared-colors/morph-shared-colors.html">
<link rel="import" href="/bower_components/polymer/lib/utils/debounce.html">
<link rel="import" href="/bower_components/polymer/lib/mixins/gesture-event-listeners.html">
<link rel="import" href="/bower_components/morph-ripple/morph-ripple.html">



<dom-module id="morph-tabbar-item">
  <template>
    <style>

      :host {
        --ios-grey:var(--polymorph-ios-gray-color);
        --android-white: #fff;
        --selected-label-color-ios: var(--polymorph-ios-blue-color);
        --selected-label-color-android: var(--android-white);
        --selected-text-color-android:  var(--android-white);
        --selected-text-color-ios: var(--polymorph-ios-blue-color);;



        display: inline-block;
        text-align: center;
        position: relative;
        overflow: hidden;
      }

      :host([platform="ios"]) {
        --color: var(--ios-grey);
        color: var(--color);
        padding-top: 4px;
        padding-bottom: 4px;
      }

      :host([platform="android"]) {
        --color: var(--android-white);

        color: var(--color);
        padding-top: 12px;
        padding-bottom: 12px;
      }



      :host([platform="android"][selected][label])  .label {
        color: var(--selected-label-color-android);
      }


      :host([platform="ios"][selected][label])  .label {
        color: var(--selected-label-color-ios);
      }

      span {
        display: block;
      }

      .text {
        display: inline-block;
      }

      :host([label]) {
        margin-top:25px;
      }

      :host([label]) .label {
        display: block;
        margin: 0;
        position: relative;
      }

      :host([platform="ios"][label]) .label {
        color: var(--color);
        line-height: 10px;
        margin: 0;
        font-family: "-apple-system", "SF UI Text", "Helvetica Neue", "Helvetica", "Arial", sans-serif;
        letter-spacing: .01em;
        font-size: 10px;
      }

      :host([platform="android"][label]) .label {
        line-height: 1;
        color: var(--color);
        margin: 0;
        margin-top:10px;
        font-family: "Roboto", "Noto", "Arial", sans-serif;
        text-transform: uppercase;
        letter-spacing: .01em;
        font-size: 14px;
        max-width: 100%;
      }

      :host(:not([label])) .label {
        display: none;
      }

      :host(:not([label])[selected][platform="android"]) {
        color: var(--selected-text-color-andorid);
      }

      :host(:not([label])[selected][platform="ios"]) {
        color: var(--selected-text-color-ios);
      }

      :host(:not([platform=android])) morph-ripple {
        display: none;
      }

      :host([platform="android"]) morph-ripple {
        --ripple-color: var(--color);
      }

      :host([platform="android"][selected]) morph-ripple {
        --ripple-color: var(--selected-label-color-android);
      }

      :host([platform="android"][selected][label]) morph-ripple {
        --ripple-color: var(--selected-label-color-android);
      }

    </style>
      <span name="[[name]]">
        <img class="icon" id="icon"></img>
        <span id="label" class="label"><slot id="slot"></slot></span>
        <morph-ripple></morph-ripple>
      </span>

  </template>


  <script>
    /**
     * `morph-tabbar-item`
     * Tab bar item for polymorph components
     *
     * @customElement
     * @polymer
     * @demo morph-tabbar-item/demo/index.html
     */
    class MorphTabbarItem extends MorphElement(Polymer.Element) {
      static get is() { return 'morph-tabbar-item'; }
      static get properties() {
        return {
          name: {
            type: String,
            reflectToAttribute: true,
            notify: true
          },
          selectedImage: {
            type: String,
            reflectToAttribute: true,
            notify: true
          },
          notSelectedImage: {
            type: String,
            reflectToAttribute: true,
            notify: true
          },
          selected: {
            type: Boolean,
            value: false,
            reflectToAttribute: true,
            notify: true
          },
          label: {
            type: Boolean,
            value: false,
            reflectToAttribute: true,
            notify: true
          }
        };
      }
      static get observers() {
        return [
          'selectedObserver(selected)',
        ];
      }



    /**
     * selectedObserver - Observer for the changes of selected attribute.
     */       
      selectedObserver(changes) {
        this.setImageSource();
      }




      /**
       * setImageSource - Sets up the image source based on the selected attribute.
       *
       */
      setImageSource() {
        if (this.selected) {
          //if selected-image source is not specified, fallback is the not-selected-image source.
          this.$.icon.src = this.selectedImage || this.notSelectedImage;
        } else {
          this.$.icon.src = this.notSelectedImage;
        }
      }
    }

    window.customElements.define(MorphTabbarItem.is, MorphTabbarItem);
  </script>
</dom-module>
