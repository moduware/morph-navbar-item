<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">

    <title>morph-tabbar-item test</title>

    <script src="../node_modules/@webcomponents/webcomponentsjs/webcomponents-bundle.js"></script>
    <script src="../node_modules/wct-browser-legacy/browser.js"></script>
    <script type="module" src="../morph-tabbar-item.js"></script>
  </head>
  <body>

    <test-fixture id="BasicAndroidFixture">
      <template>
        <morph-tabbar-item platform="android" name="favorite" not-selected-image="../img/icon.svg" selected-image="../img/icon_selected.svg"></morph-tabbar-item>
      </template>
    </test-fixture>

    <test-fixture id="AndroidFixtureLabel">
      <template>
        <morph-tabbar-item platform="android" name="favorite" not-selected-image="../img/icon.svg" selected-image="../img/icon_selected.svg" has-label></morph-tabbar-item>
      </template>
    </test-fixture>

    <test-fixture id="BasicIosFixture">
      <template>
        <morph-tabbar-item platform="ios" name="favorite" not-selected-image="../img/icon.svg" selected-image="../img/icon_selected.svg"></morph-tabbar-item>
      </template>
    </test-fixture>

    <test-fixture id="IosFixtureLabel">
      <template>
        <morph-tabbar-item platform="ios" name="favorite" not-selected-image="../img/icon.svg" selected-image="../img/icon_selected.svg" has-label></morph-tabbar-item>
      </template>
    </test-fixture>


    <script>

    describe('morph-tabbar-item', function() {

      // testing default Android Tabbar Item properties
      context('Android Default Tabbar Item', function() {
        // declare variable for item in this context only
        let item, style, ripple, rippleStyle, shadow;

        // Create a test fixture
        beforeEach(function() {
          // assigning item fixture for this context. This will automatically removed on the teardown phase of this test context
          item = fixture('BasicAndroidFixture');
          shadow = item.shadowRoot;
        });
        
        it('instantiating the item on android platform with default properties works', function(done) {
          // testing for default colors and which platform was set in html markup
          flush(function() {
            expect(item.platform).to.be.equal('android');
            expect(item.hasAttribute('selected-image')).to.be.true
            expect(item.hasAttribute('not-selected-image')).to.be.true;
            done();
          });
        });

        it('checking the item label display style on android platform is "none"', function(done) {
          // checks if the label is shown or not
          flush(function () {
            let label = shadow.querySelector('.label');
            let styleLabel = getComputedStyle(label);
            expect(styleLabel.display).to.be.equal("none");
            done();
          });
        });

        it('checking <morph-ripple> display on android is "block" ', function (done) {
          flush(function() {
            let ripple = shadow.querySelector('morph-ripple');
            let rippleStyle = getComputedStyle(ripple);
            expect(rippleStyle.display).to.be.equal('block');
            done();
          });
        });
      });

      // testing default Android Tabbar Item properties
      context('Android Default Tabbar Item with label', function() {
        // declare variable for item in this context only
        let item, shadow;

        // Create a test fixture
        beforeEach(function() {
          // assigning item fixture for this context. This will automatically removed on the teardown phase of this test context
          item = fixture('AndroidFixtureLabel');
          shadow = item.shadowRoot;
        });

        it('instantiating the item with label on android platform with label properties works', function() {
          // testing for default properties and which platform was set in html markup
          
          expect(item.platform).to.be.equal('android');
          expect(item.hasAttribute('selected-image')).to.be.true
          expect(item.hasAttribute('not-selected-image')).to.be.true;
          expect(item.hasAttribute('has-label')).to.be.true;
          expect(item.hasAttribute('name')).to.be.true;
            
        });

        it('checking the label item display style on android platform equal to "block" ', function(done) {
          // checks if the label is shown or not
          flush(function() {
            let label = shadow.querySelector('.label');
            let styleLabel = getComputedStyle(label);
            expect(styleLabel.display).to.be.equal("block");
            done();

          });
        });

        it('checking <morph-ripple> display on android works ', function (done) {
          flush(function() {
            let ripple = shadow.querySelector('morph-ripple');
            let rippleStyle = getComputedStyle(ripple);
            expect(rippleStyle.display).to.be.equal('block');
            done();
          });
        });

      });

      // testing default Ios Tabbar Item properties
      context('Ios Default Tabbar Item', function() {
        // declare variable for item in this context only
        let item, shadow;

        // Create a test fixture
        beforeEach(function() {
          // assigning item fixture for this context. This will automatically removed on the teardown phase of this test context
          item = fixture('BasicIosFixture');
          shadow = item.shadowRoot;
          // label = item.root.querySelector('.label');
          // style = getComputedStyle(label);

          // ripple = item.root.querySelector('morph-ripple');
          // rippleStyle = getComputedStyle(ripple);
        });

        it('instantiating the item on ios platform with default properties works', function() {
          // testing for default properties and which platform was set in html markup
          expect(item.platform).to.be.equal('ios');
          expect(item.hasAttribute('selected-image')).to.be.true
          expect(item.hasAttribute('not-selected-image')).to.be.true;
        });

        it('checking the item display style on ios platform works', function(done) {
          flush(function() {
            // checks if the label is shown or not
            let label = shadow.querySelector('.label');
            let styleLabel = getComputedStyle(label);
            expect(styleLabel.display).to.be.equal("none");
            done();
          });
        });

        it('checking <morph-ripple> display being none on ios works ', function (done) {
          flush(function() {
            let ripple = shadow.querySelector('morph-ripple');
            let rippleStyle = getComputedStyle(ripple);
            expect(rippleStyle.display).to.be.equal('none');
            done();
          });
        });

      });

      // testing Ios Tabbar Item with Label properties
      context('Ios Default Tabbar Item with label', function() {
        // declare variable for item in this context only
        let item, shadow;

        // Create a test fixture
        beforeEach(function() {
          // assigning item fixture for this context. This will automatically removed on the teardown phase of this test context
          item = fixture('IosFixtureLabel');
          shadow = item.shadowRoot;
        });


        it('instantiating the item on ios platform with label properties works', function() {
          // testing for properties and which platform was set in html markup
          expect(item.platform).to.be.equal('ios');
          expect(item.hasAttribute('selected-image')).to.be.true
          expect(item.hasAttribute('not-selected-image')).to.be.true;
          expect(item.hasAttribute('has-label')).to.be.true;
          expect(item.hasAttribute('name')).to.be.true;
        });

        it('checking the item display style on ios platform works', function(done) {
          flush(function() {
            // checks if the label is shown or not
            let style = getComputedStyle(item);
            expect(style.display).to.be.equal("inline-block");
            done();
          });
        });

        it('checking <morph-ripple> display being none on ios works ', function (done) {
          flush(function() {
            let ripple = shadow.querySelector('morph-ripple');
            let rippleStyle = getComputedStyle(ripple);
            expect(rippleStyle.display).to.be.equal('none');
            done();
          });
        });
      });
    });
  </script>

  </body>
</html>
